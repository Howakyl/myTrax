<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Express Music</title>
</head>
<body>
    <%- include('../partials/navbar') %>
    <h1>All Playlists</h1>
    <button><a href="/playlists/new">Add a New Playlist</a></button>

    
    <% for(let i = 0; i < playlists.length; i ++) { %>
    <section>
        <table>
            <thead>
                <tr>
                    <th colspan="3"><a href="/playlists/<%= playlists[i]._id %>"><%= playlists[i].playlistName %></a></th>
                </tr>
            </thead>
            <tr>
                <th>Title</th>
                <th>Artist</th>
                <th>Album</th>
            </tr>
            <% playlists[i].song.forEach((song) => { %>
                <tr>
                        <td>
                            <a <% if(song.link !== '') { %>
                            href="<%= song.link %>" target="_blank"><%= song.songName %></a>
                            <% } else {%> 
                                <td><%= song.songName %></td>
                            <% } %>
                        </td>
                        <td><%= song.artist %></td>
                        <td><%= song.album %></td>
                </tr>
            <% }) %>
        </table>
    </section>
    <% } %>
</body>
</html>